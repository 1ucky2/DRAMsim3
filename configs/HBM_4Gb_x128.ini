; HBM1.0 4Gb 
; 4 die, 2 channels per die
[dram_structure]
protocol = HBM
bankgroups = 4
banks_per_group = 4
rows = 16384 ;
columns = 64 ; 
device_width = 128  ; device width for each chip
BL = 2  ;
num_dies = 4

; timing units in tCK unless otherwise specified
[timing]  
tCK = 2 ; 1200MHz -> DDR4 2400
AL = 0  ; additive latency, this is for posted-cas, it's either 0 or CL-1/CL-2
CL = 7  ;
CWL = 4 ;
tRCDRD = 7  ; 
tRCDWR = 6  ; 
tRP = 7 ; PRE period 
tRAS = 17  ; ACT to PRECHARGE
; tRC = tRAS + tRP ; ACT to ACT or REF
tRFC =   ; REF to ACT or to another REF
tREFI =  1950 ; average periodic refresh interval, 3.9us
tRPRE =  1; read preamble
tWPRE =  1; TODO figure this out, should be 1 or 2 
tRRD_S =  4 ; ACT to ACT to different bankgroups, or for SAME bankgroup when bankgroup is disabled, same applied to tWTR, tCCD, tRTPS
tRRD_L =  5 ; ACT to ACT to same bankgroup 
tWTR_S = 2  ; WRITE to READ, different bankgroup
tWTR_L = 4  ; WRITE to READ, same bankgroup
tFAW = 20  ; 
tWR = 8 ; write recovery time
; tWR2 =   ; tWR2 = 1 + tWR if using 2CK tWPRE
tCCD_S = 2  ; CAS to CAS, different BG 
tCCD_L = 3  ; CAS to CAS, same BG
tXS = 0  ; tXS = tRFC + 12, exit self refresh 
tCKSRE = 0  ; valid clocks after SRE or PDE
tXP = 5  ; exit power down  

tRTP_L = 7  ; unsed only when bankgroup is enabled and to the same bankgroup
tRTP_S = 6 ; used only when bankgroup is disabled, use 1 tCK for different bankgroups

; GDDR5
tPPD = 5  ;
t32AW = 330  ; reflect long term device current supply capability, should be greater than 8*tFAW
tRFCb =   ; bank level refresh tRFC
tREFIb =   ; bank level refresh tREFI  
tRREFD =   ; timing between 2 bank refreshes of 2 different banks, or to ACT
tRFCPB =  ; timing between bank ref to act to the same bank, or between 2 rounds of 16 bank ref 

[power]
VDD = 1.2  ;
IDD0 = 48  ;
IDD2P = 25  ;
IDD2N = 34  ;
IDD3P = 37 ;
IDD3N = 43 ;
IDD4W = 123 ;
IDD4R = 135  ;
IDD5AB = 250  ;
IDD6x = 31  ;


[system]
channel_size = 512  ; size for each channel in MB, for HBM, this is the same as device density
channels = 8  ; has to be 8 channels 
bus_width = 128   ; this is more like the bus width per channel
address_mapping = chrobabgraco
queue_structure = PER_BANK
queue_size = 16
req_buffering_enabled = false


[other]
;validation_output =  hbm_verification.log
output_prefix = hbm-output-
epoch_period = 10000 ;aggregate output per this many cycles, set 0 to mute output

[thermal]
power_epoch_period = 10000; power epoch period (# cycle)
ChipX = 0.008; chip size in x dimension [m] 
ChipY = 0.008; chip size in y dimension [m]
Tamb0 = 40; The ambient temperature in [C]
numRowRefresh = 2;
matX = 2048; 
matY = 2048; 
bank_order = 1; 0: x direction first, 1: y direction first
bank_layer_order = 0;

